var VueApollo=function(t){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=200,i="__lodash_hash_undefined__",o=1/0,n=9007199254740991,s="[object Arguments]",a="[object Function]",u="[object GeneratorFunction]",l="[object Symbol]",c=/^\[object .+?Constructor\]$/,h=/^(?:0|[1-9]\d*)$/,f="object"==typeof e&&e&&e.Object===Object&&e,p="object"==typeof self&&self&&self.Object===Object&&self,v=f||p||Function("return this")();function y(t,e){return!!(t?t.length:0)&&function(t,e,r){if(e!=e)return function(t,e,r,i){var o=t.length,n=r+(i?1:-1);for(;i?n--:++n<o;)if(e(t[n],n,t))return n;return-1}(t,m,r);var i=r-1,o=t.length;for(;++i<o;)if(t[i]===e)return i;return-1}(t,e,0)>-1}function d(t,e,r){for(var i=-1,o=t?t.length:0;++i<o;)if(r(e,t[i]))return!0;return!1}function b(t,e){for(var r=-1,i=t?t.length:0,o=Array(i);++r<i;)o[r]=e(t[r],r,t);return o}function g(t,e){for(var r=-1,i=e.length,o=t.length;++r<i;)t[o+r]=e[r];return t}function m(t){return t!=t}function _(t,e){return t.has(e)}function w(t,e){return function(r){return t(e(r))}}var k,O=Array.prototype,j=Function.prototype,S=Object.prototype,$=v["__core-js_shared__"],A=(k=/[^.]+$/.exec($&&$.keys&&$.keys.IE_PROTO||""))?"Symbol(src)_1."+k:"",P=j.toString,x=S.hasOwnProperty,E=S.toString,L=RegExp("^"+P.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Q=v.Symbol,T=w(Object.getPrototypeOf,Object),q=S.propertyIsEnumerable,M=O.splice,C=Q?Q.isConcatSpreadable:void 0,R=Object.getOwnPropertySymbols,V=Math.max,K=X(v,"Map"),D=X(Object,"create");function N(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function I(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function H(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function F(t){var e=-1,r=t?t.length:0;for(this.__data__=new H;++e<r;)this.add(t[e])}function W(t,e){var r=st(t)||it(t)?function(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}(t.length,String):[],i=r.length,o=!!i;for(var n in t)!e&&!x.call(t,n)||o&&("length"==n||et(n,i))||r.push(n);return r}function G(t,e){for(var r,i,o=t.length;o--;)if((r=t[o][0])===(i=e)||r!=r&&i!=i)return o;return-1}function J(t){return!(!lt(t)||A&&A in t)&&(ut(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?L:c).test(function(t){if(null!=t){try{return P.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function U(t){if(!lt(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e,r,i,o=(r=(e=t)&&e.constructor,i="function"==typeof r&&r.prototype||S,e===i),n=[];for(var s in t)("constructor"!=s||!o&&x.call(t,s))&&n.push(s);return n}function z(t){return r=Z,i=ht(e=t),st(e)?i:g(i,r(e));var e,r,i}function B(t,e){var r,i,o=t.__data__;return("string"==(i=typeof(r=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function X(t,e){var r,i=null==(r=t)?void 0:r[e];return J(i)?i:void 0}N.prototype.clear=function(){this.__data__=D?D(null):{}},N.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},N.prototype.get=function(t){var e=this.__data__;if(D){var r=e[t];return r===i?void 0:r}return x.call(e,t)?e[t]:void 0},N.prototype.has=function(t){var e=this.__data__;return D?void 0!==e[t]:x.call(e,t)},N.prototype.set=function(t,e){return this.__data__[t]=D&&void 0===e?i:e,this},I.prototype.clear=function(){this.__data__=[]},I.prototype.delete=function(t){var e=this.__data__,r=G(e,t);return!(r<0||(r==e.length-1?e.pop():M.call(e,r,1),0))},I.prototype.get=function(t){var e=this.__data__,r=G(e,t);return r<0?void 0:e[r][1]},I.prototype.has=function(t){return G(this.__data__,t)>-1},I.prototype.set=function(t,e){var r=this.__data__,i=G(r,t);return i<0?r.push([t,e]):r[i][1]=e,this},H.prototype.clear=function(){this.__data__={hash:new N,map:new(K||I),string:new N}},H.prototype.delete=function(t){return B(this,t).delete(t)},H.prototype.get=function(t){return B(this,t).get(t)},H.prototype.has=function(t){return B(this,t).has(t)},H.prototype.set=function(t,e){return B(this,t).set(t,e),this},F.prototype.add=F.prototype.push=function(t){return this.__data__.set(t,i),this},F.prototype.has=function(t){return this.__data__.has(t)};var Y=R?w(R,Object):ft,Z=R?function(t){for(var e=[];t;)g(e,Y(t)),t=T(t);return e}:ft;function tt(t){return st(t)||it(t)||!!(C&&t&&t[C])}function et(t,e){return!!(e=null==e?n:e)&&("number"==typeof t||h.test(t))&&t>-1&&t%1==0&&t<e}function rt(t){if("string"==typeof t||("symbol"==typeof(e=t)||ct(e)&&E.call(e)==l))return t;var e,r=t+"";return"0"==r&&1/t==-o?"-0":r}function it(t){return ct(e=t)&&at(e)&&x.call(t,"callee")&&(!q.call(t,"callee")||E.call(t)==s);var e}var ot,nt,st=Array.isArray;function at(t){return null!=t&&("number"==typeof(e=t.length)&&e>-1&&e%1==0&&e<=n)&&!ut(t);var e}function ut(t){var e=lt(t)?E.call(t):"";return e==a||e==u}function lt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function ct(t){return!!t&&"object"==typeof t}function ht(t){return at(t)?W(t,!0):U(t)}function ft(){return[]}var pt=(ot=function(t,e){return null==t?{}:(e=b(function t(e,r,i,o,n){var s=-1,a=e.length;for(i||(i=tt),n||(n=[]);++s<a;){var u=e[s];r>0&&i(u)?r>1?t(u,r-1,i,o,n):g(n,u):o||(n[n.length]=u)}return n}(e,1),rt),i=t,o=function(t,e,i,o){var n,s=-1,a=y,u=!0,l=t.length,c=[],h=e.length;if(!l)return c;i&&(e=b(e,(n=i,function(t){return n(t)}))),o?(a=d,u=!1):e.length>=r&&(a=_,u=!1,e=new F(e));t:for(;++s<l;){var f=t[s],p=i?i(f):f;if(f=o||0!==f?f:0,u&&p==p){for(var v=h;v--;)if(e[v]===p)continue t;c.push(f)}else a(e,p,o)||c.push(f)}return c}(z(t),e),function(t,e,r){for(var i=-1,o=e.length,n={};++i<o;){var s=e[i],a=t[s];r(a,s)&&(n[s]=a)}return n}(i=Object(i),o,function(t,e){return e in i}));var i,o},nt=V(void 0===nt?ot.length-1:nt,0),function(){for(var t=arguments,e=-1,r=V(t.length-nt,0),i=Array(r);++e<r;)i[e]=t[nt+e];e=-1;for(var o=Array(nt+1);++e<nt;)o[e]=t[e];return o[nt]=i,function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(ot,this,o)}),vt="Expected a function",yt=NaN,dt="[object Symbol]",bt=/^\s+|\s+$/g,gt=/^[-+]0x[0-9a-f]+$/i,mt=/^0b[01]+$/i,_t=/^0o[0-7]+$/i,wt=parseInt,kt="object"==typeof e&&e&&e.Object===Object&&e,Ot="object"==typeof self&&self&&self.Object===Object&&self,jt=kt||Ot||Function("return this")(),St=Object.prototype.toString,$t=Math.max,At=Math.min,Pt=function(){return jt.Date.now()};function xt(t,e,r){var i,o,n,s,a,u,l=0,c=!1,h=!1,f=!0;if("function"!=typeof t)throw new TypeError(vt);function p(e){var r=i,n=o;return i=o=void 0,l=e,s=t.apply(n,r)}function v(t){var r=t-u;return void 0===u||r>=e||r<0||h&&t-l>=n}function y(){var t,r,i=Pt();if(v(i))return d(i);a=setTimeout(y,(r=e-((t=i)-u),h?At(r,n-(t-l)):r))}function d(t){return a=void 0,f&&i?p(t):(i=o=void 0,s)}function b(){var t,r=Pt(),n=v(r);if(i=arguments,o=this,u=r,n){if(void 0===a)return l=t=u,a=setTimeout(y,e),c?p(t):s;if(h)return a=setTimeout(y,e),p(u)}return void 0===a&&(a=setTimeout(y,e)),s}return e=Lt(e)||0,Et(r)&&(c=!!r.leading,n=(h="maxWait"in r)?$t(Lt(r.maxWait)||0,e):n,f="trailing"in r?!!r.trailing:f),b.cancel=function(){void 0!==a&&clearTimeout(a),l=0,i=u=o=a=void 0},b.flush=function(){return void 0===a?s:d(Pt())},b}function Et(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Lt(t){if("number"==typeof t)return t;if("symbol"==typeof(e=t)||(r=e)&&"object"==typeof r&&St.call(e)==dt)return yt;var e,r;if(Et(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=Et(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(bt,"");var o=mt.test(t);return o||_t.test(t)?wt(t.slice(2),o?2:8):gt.test(t)?yt:+t}var Qt=function(t,e,r){var i=!0,o=!0;if("function"!=typeof t)throw new TypeError(vt);return Et(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),xt(t,e,{leading:i,maxWait:e,trailing:o})},Tt="Expected a function",qt=NaN,Mt="[object Symbol]",Ct=/^\s+|\s+$/g,Rt=/^[-+]0x[0-9a-f]+$/i,Vt=/^0b[01]+$/i,Kt=/^0o[0-7]+$/i,Dt=parseInt,Nt="object"==typeof e&&e&&e.Object===Object&&e,It="object"==typeof self&&self&&self.Object===Object&&self,Ht=Nt||It||Function("return this")(),Ft=Object.prototype.toString,Wt=Math.max,Gt=Math.min,Jt=function(){return Ht.Date.now()};function Ut(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function zt(t){if("number"==typeof t)return t;if("symbol"==typeof(e=t)||(r=e)&&"object"==typeof r&&Ft.call(e)==Mt)return qt;var e,r;if(Ut(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=Ut(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ct,"");var o=Vt.test(t);return o||Kt.test(t)?Dt(t.slice(2),o?2:8):Rt.test(t)?qt:+t}var Bt=function(t,e,r){var i,o,n,s,a,u,l=0,c=!1,h=!1,f=!0;if("function"!=typeof t)throw new TypeError(Tt);function p(e){var r=i,n=o;return i=o=void 0,l=e,s=t.apply(n,r)}function v(t){var r=t-u;return void 0===u||r>=e||r<0||h&&t-l>=n}function y(){var t,r,i=Jt();if(v(i))return d(i);a=setTimeout(y,(r=e-((t=i)-u),h?Gt(r,n-(t-l)):r))}function d(t){return a=void 0,f&&i?p(t):(i=o=void 0,s)}function b(){var t,r=Jt(),n=v(r);if(i=arguments,o=this,u=r,n){if(void 0===a)return l=t=u,a=setTimeout(y,e),c?p(t):s;if(h)return a=setTimeout(y,e),p(u)}return void 0===a&&(a=setTimeout(y,e)),s}return e=zt(e)||0,Ut(r)&&(c=!!r.leading,n=(h="maxWait"in r)?Wt(zt(r.maxWait)||0,e):n,f="trailing"in r?!!r.trailing:f),b.cancel=function(){void 0!==a&&clearTimeout(a),l=0,i=u=o=a=void 0},b.flush=function(){return void 0===a?s:d(Jt())},b},Xt={};function Yt(t){return function(e,r){return"number"==typeof r?t(e,r):t(e,r.wait,r)}}var Zt=Yt(Qt),te=Yt(Bt);function ee(t,e){for(;"function"==typeof t;)t=t.call(e);return t}var re=["variables","watch","update","result","error","loadingKey","watchLoading","skip","throttle","debounce","subscribeToMore","prefetch","manual"],ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe=(function(){function t(t){this.value=t}function e(e){var r,i;function o(r,i){try{var s=e[r](i),a=s.value;a instanceof t?Promise.resolve(a.value).then(function(t){o("next",t)},function(t){o("throw",t)}):n(s.done?"return":"normal",s.value)}catch(t){n("throw",t)}}function n(t,e){switch(t){case"return":r.resolve({value:e,done:!0});break;case"throw":r.reject(e);break;default:r.resolve({value:e,done:!1})}(r=r.next)?o(r.key,r.arg):i=null}this._invoke=function(t,e){return new Promise(function(n,s){var a={key:t,arg:e,resolve:n,reject:s,next:null};i?i=i.next=a:(r=i=a,o(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),ne=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),se=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ae=function t(e,r,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var n=Object.getPrototypeOf(e);return null===n?void 0:t(n,r,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},ue=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},le=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},ce=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)},he=function(){function t(e,r,i){var o=this,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(oe(this,t),this.type=null,this.vueApolloSpecialKeys=[],this.vm=e,this.key=r,this.options=Object.assign({},i),this._skip=!1,this._watchers=[],"function"==typeof this.options.query){var s=this.options.query.bind(this.vm);this.options.query=s(),this._watchers.push(this.vm.$watch(s,function(t){o.options.query=t,o.refresh()}))}if("function"==typeof this.options.document){var a=this.options.document.bind(this.vm);this.options.document=a(),this._watchers.push(this.vm.$watch(a,function(t){o.options.document=t,o.refresh()}))}this.vm.$isServer&&(this.options.fetchPolicy="cache-first"),n&&this.autostart()}return ne(t,[{key:"autostart",value:function(){"function"==typeof this.options.skip?this._watchers.push(this.vm.$watch(this.options.skip.bind(this.vm),this.skipChanged.bind(this),{immediate:!0})):this.options.skip?this._skip=!0:this.start()}},{key:"skipChanged",value:function(t,e){t!==e&&(this.skip=t)}},{key:"refresh",value:function(){this._skip||(this.stop(),this.start())}},{key:"start",value:function(){var t=this;if(this.starting=!0,"function"==typeof this.options.variables){var e=this.executeApollo.bind(this);e=this.options.throttle?Zt(e,this.options.throttle):e,e=this.options.debounce?te(e,this.options.debounce):e,this.unwatchVariables=this.vm.$watch(function(){return t.options.variables.call(t.vm)},e,{immediate:!0})}else this.executeApollo(this.options.variables)}},{key:"stop",value:function(){this.unwatchVariables&&(this.unwatchVariables(),this.unwatchVariables=null),this.sub&&(this.sub.unsubscribe(),this.sub=null)}},{key:"generateApolloOptions",value:function(t){var e=pt(this.options,this.vueApolloSpecialKeys);return e.variables=t,e}},{key:"executeApollo",value:function(t){this.starting=!1}},{key:"nextResult",value:function(){throw new Error("Not implemented")}},{key:"errorHandler",value:function(){for(var t,e,r,i=arguments.length,o=Array(i),n=0;n<i;n++)o[n]=arguments[n];this.options.error&&(t=this.options.error).call.apply(t,[this.vm].concat(o)),this.vm.$apollo.error&&(e=this.vm.$apollo.error).call.apply(e,[this.vm].concat(o)),this.vm.$apollo.provider.errorHandler&&(r=this.vm.$apollo.provider.errorHandler).call.apply(r,[this.vm].concat(o))}},{key:"catchError",value:function(t){if(t.graphQLErrors&&0!==t.graphQLErrors.length){console.error("GraphQL execution errors for "+this.type+" '"+this.key+"'");var e=!0,r=!1,i=void 0;try{for(var o,n=t.graphQLErrors[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var s=o.value;console.error(s)}}catch(t){r=!0,i=t}finally{try{!e&&n.return&&n.return()}finally{if(r)throw i}}}else if(t.networkError)console.error("Error sending the "+this.type+" '"+this.key+"'",t.networkError);else{var a;if(console.error("[vue-apollo] An error has occured for "+this.type+" '"+this.key+"'"),Array.isArray(t))(a=console).error.apply(a,ce(t));else console.error(t)}this.errorHandler(t)}},{key:"destroy",value:function(){this.stop();var t=!0,e=!1,r=void 0;try{for(var i,o=this._watchers[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){(0,i.value)()}}catch(t){e=!0,r=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw r}}}},{key:"skip",get:function(){return this._skip},set:function(t){t?this.stop():this.start(),this._skip=t}}]),t}(),fe=function(t){function e(t,r,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];(oe(this,e),i.query)||(i={query:i});var n=le(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,i,o));return n.type="query",n.vueApolloSpecialKeys=re,n.loading=!1,n}return ue(e,he),ne(e,[{key:"stop",value:function(){ae(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stop",this).call(this),this.observer&&(this.observer.stopPolling(),this.observer=null)}},{key:"executeApollo",value:function(t){this.observer?this.observer.setOptions(this.generateApolloOptions(t)):(this.sub&&this.sub.unsubscribe(),this.observer=this.vm.$apollo.watchQuery(this.generateApolloOptions(t)),this.sub=this.observer.subscribe({next:this.nextResult.bind(this),error:this.catchError.bind(this)}));var r=this.maySetLoading();r.loading||this.nextResult(r),ae(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"executeApollo",this).call(this,t)}},{key:"maySetLoading",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.observer.currentResult();return(t||e.loading)&&(this.loading||this.applyLoadingModifier(1),this.loading=!0),e}},{key:"nextResult",value:function(t){var e=t.data;t.loading||this.loadingDone();var r="function"==typeof this.options.result;void 0===e||("function"==typeof this.options.update?this.vm[this.key]=this.options.update.call(this.vm,e):void 0===e[this.key]?console.error("Missing "+this.key+" attribute on result",e):this.options.manual?r||console.error(this.key+" query must have a 'result' hook in manual mode"):this.vm[this.key]=e[this.key]),r&&this.options.result.call(this.vm,t)}},{key:"catchError",value:function(t){ae(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"catchError",this).call(this,t),this.loadingDone()}},{key:"watchLoading",value:function(){for(var t,e,r,i=arguments.length,o=Array(i),n=0;n<i;n++)o[n]=arguments[n];this.options.watchLoading&&(t=this.options.watchLoading).call.apply(t,[this.vm].concat(o)),this.vm.$apollo.watchLoading&&(e=this.vm.$apollo.watchLoading).call.apply(e,[this.vm].concat(o)),this.vm.$apollo.provider.watchLoading&&(r=this.vm.$apollo.provider.watchLoading).call.apply(r,[this.vm].concat(o))}},{key:"applyLoadingModifier",value:function(t){var e=this.loadingKey;e&&"number"==typeof this.vm[e]&&(this.vm[e]+=t),this.watchLoading(1===t,t)}},{key:"loadingDone",value:function(){this.loading&&this.applyLoadingModifier(-1),this.loading=!1}},{key:"fetchMore",value:function(){var t,e=this;if(this.observer)return this.maySetLoading(!0),(t=this.observer).fetchMore.apply(t,arguments).then(function(t){return t.loading||e.loadingDone(),t})}},{key:"subscribeToMore",value:function(){var t;if(this.observer)return{unsubscribe:(t=this.observer).subscribeToMore.apply(t,arguments)}}},{key:"refetch",value:function(t){var e=this;if(t&&(this.options.variables=t),this.observer){var r=this.observer.refetch(t).then(function(t){return t.loading||e.loadingDone(),t});return this.maySetLoading(),r}}},{key:"setVariables",value:function(t,e){if(this.options.variables=t,this.observer){var r=this.observer.setVariables(t,e);return this.maySetLoading(),r}}},{key:"setOptions",value:function(t){if(Object.assign(this.options,t),this.observer){var e=this.observer.setOptions(t);return this.maySetLoading(),e}}},{key:"startPolling",value:function(){var t;if(this.observer)return(t=this.observer).startPolling.apply(t,arguments)}},{key:"stopPolling",value:function(){var t;if(this.observer)return(t=this.observer).stopPolling.apply(t,arguments)}},{key:"loadingKey",get:function(){return this.options.loadingKey||this.vm.$apollo.loadingKey}}]),e}(),pe=function(t){function e(){var t,r,i,o;oe(this,e);for(var n=arguments.length,s=Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=i=babelHelpers.possibleConstructorReturn(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(s))),i.type="subscription",i.vueApolloSpecialKeys=["variables","result","error","throttle","debounce","linkedQuery"],o=r,babelHelpers.possibleConstructorReturn(i,o)}return ue(e,he),ne(e,[{key:"executeApollo",value:function(t){var r=JSON.stringify(t);if(this.sub){if(r===this.previousVariablesJson)return;this.sub.unsubscribe()}this.previousVariablesJson=r;var i=this.generateApolloOptions(t);this.options.linkedQuery?this.sub=this.options.linkedQuery.subscribeToMore(i):(this.observer=this.vm.$apollo.subscribe(i),this.sub=this.observer.subscribe({next:this.nextResult.bind(this),error:this.catchError.bind(this)})),ae(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"executeApollo",this).call(this,t)}},{key:"nextResult",value:function(t){"function"==typeof this.options.result&&this.options.result.call(this.vm,t)}}]),e}(),ve=function(){function t(e){oe(this,t),this._apolloSubscriptions=[],this._watchers=[],this.vm=e,this.queries={},this.subscriptions={},this.client=void 0,this.loadingKey=void 0,this.error=void 0}return ne(t,[{key:"query",value:function(t){return this.getClient(t).query(t)}},{key:"getClient",value:function(t){if(!t||!t.client){if("object"===ie(this.client))return this.client;if(this.client){if(this.provider.clients){var e=this.provider.clients[this.client];if(!e)throw new Error("[vue-apollo] Missing client '"+this.client+"' in 'apolloProvider'");return e}throw new Error("[vue-apollo] Missing 'clients' options in 'apolloProvider'")}return this.provider.defaultClient}var r=this.provider.clients[t.client];if(!r)throw new Error("[vue-apollo] Missing client '"+t.client+"' in 'apolloProvider'");return r}},{key:"watchQuery",value:function(t){var e=this,r=this.getClient(t).watchQuery(t),i=r.subscribe.bind(r);return r.subscribe=function(t){var r=i(t);return e._apolloSubscriptions.push(r),r},r}},{key:"mutate",value:function(t){return this.getClient(t).mutate(t)}},{key:"subscribe",value:function(t){var e=this;if(!this.vm.$isServer){var r=this.getClient(t).subscribe(t),i=r.subscribe.bind(r);return r.subscribe=function(t){var r=i(t);return e._apolloSubscriptions.push(r),r},r}}},{key:"addSmartQuery",value:function(t,e){var r=this;e=ee(e,this.vm);var i=this.queries[t]=new fe(this.vm,t,e,!1);if(i.autostart(),!this.vm.$isServer){var o=e.subscribeToMore;o&&(Array.isArray(o)?o.forEach(function(e,o){r.addSmartSubscription(""+t+o,se({},e,{linkedQuery:i}))}):this.addSmartSubscription(t,se({},o,{linkedQuery:i})))}return i}},{key:"addSmartSubscription",value:function(t,e){if(!this.vm.$isServer){e=ee(e,this.vm);var r=this.subscriptions[t]=new pe(this.vm,t,e,!1);return r.autostart(),r}}},{key:"defineReactiveSetter",value:function(t,e){var r=this;this._watchers.push(this.vm.$watch(e,function(e){r[t]=e},{immediate:!0}))}},{key:"destroy",value:function(){var t=!0,e=!1,r=void 0;try{for(var i,o=this._watchers[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){(0,i.value)()}}catch(t){e=!0,r=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw r}}for(var n in this.queries)this.queries[n].destroy();for(var s in this.subscriptions)this.subscriptions[s].destroy();this._apolloSubscriptions.forEach(function(t){t.unsubscribe()}),this._apolloSubscriptions=null,this.vm=null}},{key:"provider",get:function(){return this._apolloProvider||this.vm.$root._apolloProvider}},{key:"skipAllQueries",set:function(t){for(var e in this.queries)this.queries[e].skip=t}},{key:"skipAllSubscriptions",set:function(t){for(var e in this.subscriptions)this.subscriptions[e].skip=t}},{key:"skipAll",set:function(t){this.skipAllQueries=t,this.skipAllSubscriptions=t}}]),t}(),ye=function(){function t(e){if(oe(this,t),!e)throw new Error("Options argument required");this.clients=e.clients||{},this.clients.defaultClient=this.defaultClient=e.defaultClient,this.defaultOptions=e.defaultOptions,this.watchLoading=e.watchLoading,this.errorHandler=e.errorHandler,this.prefetchQueries=[]}return ne(t,[{key:"willPrefetchQuery",value:function(t,e){this.prefetchQueries.push({queryOptions:t,client:e})}},{key:"willPrefetch",value:function(t){var e;e=t;var r=(t=Xt.Vue.util.mergeOptions({},e)).apollo;if(r){var i=r.$client;for(var o in r){var n=r[o];"$"===o.charAt(0)||n.query&&(void 0!==n.ssr&&!n.ssr||void 0===n.prefetch||!n.prefetch)||this.willPrefetchQuery(n,n.client||i)}}}},{key:"willPrefetchComponents",value:function(t){var e=!0,r=!1,i=void 0;try{for(var o,n=t[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var s=o.value;this.willPrefetch(s)}}catch(t){r=!0,i=t}finally{try{!e&&n.return&&n.return()}finally{if(r)throw i}}}},{key:"prefetchAll",value:function(t,e,r){var i=this;r||!e||Array.isArray(e)||(r=e,e=void 0);var o=Object.assign({},{includeGlobal:!0},r);return e&&this.willPrefetchComponents(e),o.includeGlobal&&this.willPrefetchComponents(de),Promise.all(this.prefetchQueries.map(function(e){return i.prefetchQuery(e.queryOptions,t,e.client)}))}},{key:"prefetchQuery",value:function(t,e,r){var i=void 0;if(r){if("string"==typeof r&&!(r=this.clients[r]))throw new Error("[vue-apollo] Missing client '"+r+"' in 'apolloProvider'")}else r=this.defaultClient;if(t.query){var o=t.prefetch,n=void 0===o?"undefined":ie(o);if("undefined"!==n){var s=void 0;if(!(s="function"===n?o(e):o))return Promise.resolve();if("boolean"===n){var a=t.variables;i=void 0!==a?"function"==typeof a?a.call(e):a:void 0}else i=s}}else t={query:t};return new Promise(function(e,o){var n=pt(t,[].concat(ce(re),["fetchPolicy"]));n.variables=i,n.fetchPolicy="network-only",r.query(n).then(e,o)})}},{key:"getStates",value:function(t){var e=Object.assign({},{exportNamespace:""},t),r={};for(var i in this.clients){var o=this.clients[i].cache.extract();r[""+e.exportNamespace+i]=o}return r}},{key:"exportStates",value:function(t){var e=Object.assign({},{globalName:"__APOLLO_STATE__",attachTo:"window"},t),r=this.getStates(e);return e.attachTo+"."+e.globalName+" = "+JSON.stringify(r)+";"}}]),t}(),de=[];var be=["$subscribe"],ge=function(){var t=void 0;if(t=this.$options.apolloProvider?this._apolloProvider=this.$options.apolloProvider:this.$root._apolloProvider,!this._apolloPrepared){this._apolloPrepared=!0;var e=this.$options.apollo;if(e){this._apolloQueries={},this._apolloInitData={},e.$init||(e.$init=!0,t.defaultOptions&&(e=this.$options.apollo=Object.assign({},t.defaultOptions,e)));for(var r in e)"$"!==r.charAt(0)&&(this._apolloInitData[r]=null,this._apolloQueries[r]=e[r])}}},me=function(){if(!this._apolloLaunched){this._apolloLaunched=!0;var t=this.$options.apollo;if(t&&(_e(this.$apollo,"skipAll",t.$skipAll),_e(this.$apollo,"skipAllQueries",t.$skipAllQueries),_e(this.$apollo,"skipAllSubscriptions",t.$skipAllSubscriptions),_e(this.$apollo,"client",t.$client),_e(this.$apollo,"loadingKey",t.$loadingKey),_e(this.$apollo,"error",t.$error),_e(this.$apollo,"watchLoading",t.$watchLoading)),this._apolloQueries)for(var e in this._apolloQueries)this.$apollo.addSmartQuery(e,this._apolloQueries[e]);if(t&&(t.subscribe&&Xt.Vue.util.warn("vue-apollo -> `subscribe` option is deprecated. Use the `$subscribe` option instead."),t.$subscribe))for(var r in t.$subscribe)this.$apollo.addSmartSubscription(r,t.$subscribe[r])}};function _e(t,e,r){void 0!==r&&("function"==typeof r?t.defineReactiveSetter(e,r):t[e]=r)}function we(t,e){if(!we.installed){we.installed=!0,Xt.Vue=t;var r=t.config.optionMergeStrategies.methods;t.config.optionMergeStrategies.apollo=function(t,e,i){if(!t)return e;if(!e)return t;for(var o=Object.assign({},pt(t,be),t.data),n=Object.assign({},pt(e,be),e.data),s={},a=0;a<be.length;a++){var u=be[a];s[u]=r(t[u],e[u])}return Object.assign(s,r(o,n))},Object.defineProperty(t.prototype,"$apollo",{get:function(){return this._apollo||(this._apollo=new ve(this)),this._apollo}}),t.mixin({init:ge,beforeCreate:ge,data:function(){return this._apolloInitData||{}},created:me,destroyed:function(){this._apollo&&(this._apollo.destroy(),this._apollo=null)}})}}ye.install=we,ye.version="3.0.0-alpha.3";var ke=ye,Oe=null;return"undefined"!=typeof window?Oe=window.Vue:"undefined"!=typeof global&&(Oe=global.Vue),Oe&&Oe.use(ye),t.install=we,t.ApolloProvider=ke,t.default=ye,t.willPrefetch=function(t){return de.push(t),t},t}({});
